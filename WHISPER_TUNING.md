# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ Whisper

## üìä –ë—ã—Å—Ç—Ä–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –†–∞–∑–º–µ—Ä | –°–∫–æ—Ä–æ—Å—Ç—å | –¢–æ—á–Ω–æ—Å—Ç—å (—Ä—É—Å) | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|-----------|--------|----------|----------------|--------------|
| tiny   | 39M       | ~75MB  | ‚ö°‚ö°‚ö°‚ö°‚ö° | ‚≠ê‚≠ê          | –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã |
| base   | 74M       | ~150MB | ‚ö°‚ö°‚ö°‚ö°   | ‚≠ê‚≠ê‚≠ê        | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| **small** | **244M** | **~500MB** | **‚ö°‚ö°‚ö°** | **‚≠ê‚≠ê‚≠ê‚≠ê** | **‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø** |
| medium | 769M      | ~1.5GB | ‚ö°‚ö°      | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê    | –î–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ |
| large-v3 | 1550M   | ~3GB   | ‚ö°       | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê  | –ú–∞–∫—Å–∏–º—É–º     |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É

### –î–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ Instagram –∫–æ–Ω—Ç–µ–Ω—Ç–∞:
```json
{
  "whisper_model": "small",           // –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
  "whisper_compute_type": "int8",     // –ë—ã—Å—Ç—Ä–æ
  "num_threads": 8                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ —è–¥—Ä–∞
}
```

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ (–º–µ–¥–ª–µ–Ω–Ω–æ):
```json
{
  "whisper_model": "medium",          // –ò–ª–∏ large-v3
  "whisper_compute_type": "float16",  // –í—ã—à–µ —Ç–æ—á–Ω–æ—Å—Ç—å
  "num_threads": 8
}
```

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```json
{
  "whisper_model": "base",
  "whisper_compute_type": "int8",
  "num_threads": 8
}
```

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ config.json

–û—Ç–∫—Ä–æ–π—Ç–µ `config.json` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```json
{
  "whisper_model": "small",              // ‚Üê –ò–∑–º–µ–Ω–∏—Ç–µ –∑–¥–µ—Å—å
  "whisper_compute_type": "int8",        // int8 | float16 | float32
  "num_threads": 8
}
```

## üîß –ß—Ç–æ –±—ã–ª–æ —É–ª—É—á—à–µ–Ω–æ –≤ –∫–æ–¥–µ

### 1. –£–≤–µ–ª–∏—á–µ–Ω beam_size (5 ‚Üí 10)
- –ë–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–π –ø–æ–∏—Å–∫ –ª—É—á—à–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ü–æ–≤—ã—à–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ ~5-10%

### 2. –î–æ–±–∞–≤–ª–µ–Ω best_of=5
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π
- –£–ª—É—á—à–∞–µ—Ç –≤—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–ª–æ–≤

### 3. –î–æ–±–∞–≤–ª–µ–Ω initial_prompt
```python
initial_prompt="–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≤–∏–¥–µ–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –∏–∑ Instagram. 
                –í–∫–ª—é—á–∞–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—É—é —Ä–µ—á—å, —Å–ª–µ–Ω–≥, —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π..."
```
- –î–∞—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–¥–µ–ª–∏
- –ü–æ–º–æ–≥–∞–µ—Ç —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –ª–µ–∫—Å–∏–∫–∏

### 4. –£–ª—É—á—à–µ–Ω—ã VAD –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```python
vad_parameters=dict(
    threshold=0.5,                    # –ü–æ—Ä–æ–≥ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ä–µ—á–∏
    min_speech_duration_ms=250,       # –ú–∏–Ω–∏–º—É–º 250–º—Å —Ä–µ—á–∏
    min_silence_duration_ms=2000,     # 2 —Å–µ–∫ —Ç–∏—à–∏–Ω—ã = –ø–∞—É–∑–∞
    speech_pad_ms=400                 # –û—Ç—Å—Ç—É–ø—ã –ø–æ –∫—Ä–∞—è–º
)
```

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π (base + beam_size=5):
```
–ö–∞–∑–∞–≤—Å–∫–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑ –º–æ–µ–π –∫–æ–º–∞–Ω–¥—ã –ø–æ–∫–∞–∑–∞–ª –Ω–µ–∏—Å–ø–æ—Å–æ, 
–∫–∞–∫ –æ–Ω —Ç–∞—Å–∫–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ —Å–∞–π—Ç–∞ —Ç–∞ –∂–µ –µ—Å—Ç—å –≤ –Ω–µ–≥–æ –Ω–µ—Ç —Ñ–∞–ø–µ.
```

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π (small + beam_size=10 + best_of=5):
```
–ö–∞–∑–∞—Ö—Å–∫–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑ –º–æ–µ–π –∫–æ–º–∞–Ω–¥—ã –ø–æ–∫–∞–∑–∞–ª —Å–ø–æ—Å–æ–±,
–∫–∞–∫ –æ–Ω –¥–æ—Å—Ç–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ —Å –ª—é–±–æ–≥–æ —Å–∞–π—Ç–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –Ω—ë–º –Ω–µ—Ç API.
```

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ config.json (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
nano config.json
# –ò–∑–º–µ–Ω–∏—Ç–µ whisper_model –Ω–∞ "small"
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X)
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
```bash
python src/download.py
# –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
```

### –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
```python
from src.modules.local_ears import LocalEars

ears = LocalEars(
    model_size="small",          # –∏–ª–∏ "medium", "large-v3"
    compute_type="int8",         # –∏–ª–∏ "float16"
    num_threads=8
)
```

## üíæ –†–∞–∑–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π –∏ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –º–æ–¥–µ–ª—å —Å–∫–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- **tiny**: ~75MB, –∑–∞–≥—Ä—É–∑–∫–∞ ~5 —Å–µ–∫
- **base**: ~150MB, –∑–∞–≥—Ä—É–∑–∫–∞ ~10 —Å–µ–∫
- **small**: ~500MB, –∑–∞–≥—Ä—É–∑–∫–∞ ~30 —Å–µ–∫ ‚≠ê
- **medium**: ~1.5GB, –∑–∞–≥—Ä—É–∑–∫–∞ ~1-2 –º–∏–Ω
- **large-v3**: ~3GB, –∑–∞–≥—Ä—É–∑–∫–∞ ~3-5 –º–∏–Ω

–ú–æ–¥–µ–ª–∏ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ `~/.cache/huggingface/hub/`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–µ–¥–ª–µ–Ω–Ω—ã–π** - –º–æ–¥–µ–ª—å —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å
2. **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –±—ã—Å—Ç—Ä—ã–µ** - –º–æ–¥–µ–ª—å –≤ –∫–µ—à–µ
3. **–ë–æ–ª—å—à–µ –º–æ–¥–µ–ª—å = –±–æ–ª—å—à–µ RAM**:
   - small: ~1GB RAM
   - medium: ~2-3GB RAM
   - large: ~5-6GB RAM
4. **compute_type –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å**:
   - `int8`: –±—ã—Å—Ç—Ä–æ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - `float16`: –º–µ–¥–ª–µ–Ω–Ω–µ–µ –Ω–∞ ~30%, —Ç–æ—á–Ω–µ–µ –Ω–∞ ~2-5%
   - `float32`: –≤ 2 —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –ø—Ä–∏—Ä–æ—Å—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏

### Auto-detect —è–∑—ã–∫–∞ (–µ—Å–ª–∏ —Å–º–µ—à–∞–Ω–Ω–∞—è —Ä–µ—á—å):
–í `src/modules/local_ears.py` –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
segments, info = self.model.transcribe(
    str(media_path),
    language=None,  # ‚Üê –í–º–µ—Å—Ç–æ "ru"
    ...
)
```

### –î–≤—É—Ö–ø—Ä–æ—Ö–æ–¥–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º –∫–∞—á–µ—Å—Ç–≤–∞):
```python
# –ü–µ—Ä–≤—ã–π –ø—Ä–æ—Ö–æ–¥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞
segments1, info1 = self.model.transcribe(str(media_path), language=None)

# –í—Ç–æ—Ä–æ–π –ø—Ä–æ—Ö–æ–¥ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –ø–µ—Ä–≤–æ–≥–æ
segments2, info2 = self.model.transcribe(
    str(media_path), 
    language=info1.language,
    initial_prompt=" ".join([s.text for s in segments1[:5]])  # –ü–µ—Ä–≤—ã–µ 5 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç
)
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞

–ü–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
cat "SecondBrain_Inbox/[–ø–∞–ø–∫–∞]/transcript.md"
```

–û—Ü–µ–Ω–∏—Ç–µ:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∏–º—ë–Ω/–±—Ä–µ–Ω–¥–æ–≤
- ‚úÖ –ü—É–Ω–∫—Ç—É–∞—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã (–ò–ò, API, –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Ç.–¥.)

## üîÑ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ temp –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É
rm -rf temp/*
python src/download.py
# –í–≤–µ–¥–∏—Ç–µ URL, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```
