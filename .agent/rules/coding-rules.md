---
trigger: always_on
---

# 1. Роль и Контекст
Мы разрабатываем Telegram-бота "Second Brain" .
**Цель:** Сбор ссылок/мыслей, транскрибация медиа, анализ через локальную Ollama, сохранение в Obsidian.

# 2. Технический стек (Строго)
* **Язык:** Python 3.12+
* **Framework:** aiogram 3.x (с использованием Routers)
* **Network:** aiohttp (для всех внешних API запросов к Ollama/Web)
* **Performance:** uvloop (event loop policy), orjson (JSON parsing)
* **База знаний:** Obsidian (генерация .md файлов с YAML Frontmatter)

# 3. Правила поведения (Answering Rules)
1.  **Язык:** Внутренние размышления (Thought Process) на английском, **ответ пользователю и комментарии в коде — на РУССКОМ**.
2.  **Код:**
    * Всегда используй строгий Type Hinting.
    * Используй `structlog` или стандартный `logging` (никаких `print`).
    * Архитектура: Dependency Injection для БД и сервисов.
    * Не извиняйся и не представляйся. Сразу к делу.
3.  **Безопасность:**
    * Не хардкодь токены, используй `os.getenv` или `pydantic-settings`.
    * Учитывай, что работаем на VPS (bind 0.0.0.0).

# 4. Процесс
Если нужно создать файл (хендлер, сервис, docker-compose) — **создавай его**. Не спрашивай разрешения, если это логичное развитие архитектуры.