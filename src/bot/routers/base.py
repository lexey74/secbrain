from aiogram import Router, types
from aiogram.filters import CommandStart, Command
from aiogram.enums import ParseMode

router = Router()

@router.message(CommandStart())
async def cmd_start(message: types.Message):
    """
    Handler for /start command
    """
    user_name = message.from_user.first_name if message.from_user else "User"
    
    welcome_text = f"""
üß† <b>SecBrain - Personal Knowledge Manager</b>

üëã –ü—Ä–∏–≤–µ—Ç, {user_name}!

–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ —Ç–≤–æ—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üì• <b>–ß—Ç–æ —è —É–º–µ—é:</b>

üîó <b>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏</b>
   ‚Ä¢ Instagram (Posts, Reels, Stories)
   ‚Ä¢ YouTube (Videos, Shorts)
   ‚Ä¢ TikTok (—Å–∫–æ—Ä–æ)

üé§ <b>–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è</b>
   ‚Ä¢ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (Whisper AI)
   ‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 99+ —è–∑—ã–∫–æ–≤
   ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Markdown

ü§ñ <b>AI –ê–Ω–∞–ª–∏–∑</b>
   ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∞–º–º–∞—Ä–∏
   ‚Ä¢ –£–º–Ω—ã–µ —Ç–µ–≥–∏
   ‚Ä¢ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üöÄ <b>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</b>

1Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å —Å—Å—ã–ª–∫—É (YouTube/Instagram)
2Ô∏è‚É£ –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å —Ñ–∞–π–ª (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)
3Ô∏è‚É£ –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å —Ç–µ–∫—Å—Ç –¥–ª—è –∑–∞–º–µ—Ç–∫–∏

–Ø —Å–∫–∞—á–∞—é, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é –∏ —Å–æ—Ö—Ä–∞–Ω—é –≤—Å—ë –≤ Obsidian!
"""
    await message.answer(welcome_text, parse_mode=ParseMode.HTML)


@router.message(Command("help"))
async def cmd_help(message: types.Message):
    """
    Handler for /help command
    """
    help_text = """
üìñ <b>–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ SecBrain</b>

<b>üì• 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:</b>
‚Ä¢ <b>–§–∞–π–ª—ã –∏ —Ç–µ–∫—Å—Ç (–æ—Ç–ø—Ä–∞–≤–ª—è–π –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã):</b>
  - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ/–¥–æ–∫—É–º–µ–Ω—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω—é –≤ –ª–∏—á–Ω—É—é –ø–∞–ø–∫—É
  - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω—é –∫–∞–∫ –∑–∞–º–µ—Ç–∫—É

‚Ä¢ <b>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /url</b>
–Ø –∑–∞–ø—Ä–æ—à—É —Å—Å—ã–ª–∫—É. –ü—Ä–∏—à–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ Youtube –∏–ª–∏ Instagram.

<b>–Ø —É–º–µ—é —Å–∫–∞—á–∏–≤–∞—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:</b>
‚Ä¢ <b>YouTube:</b>
  - –í–∏–¥–µ–æ (watch?v=..., youtu.be/...)
  - Shorts (shorts/...)
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–ø—Ä–µ–¥–ª–æ–∂—É —Å–∫–∞—á–∞—Ç—å –ø–æ—Å–ª–µ –≤–∏–¥–µ–æ)

‚Ä¢ <b>Instagram:</b>
  - Posts (p/...) - –§–æ—Ç–æ/–ö–∞—Ä—É—Å–µ–ª–∏/–í–∏–¥–µ–æ
  - Reels (reel/...) - –í–∏–¥–µ–æ

<b>üß† 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ AI:</b>
‚Ä¢ /transcribe - –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–∏–¥–µ–æ –≤ –ø–∞–ø–∫–µ (Whisper)
‚Ä¢ /ai - –ó–∞–ø—É—Å—Ç–∏—Ç—å AI –∞–Ω–∞–ª–∏–∑: —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–∞–º–º–∞—Ä–∏ (Ollama)
‚Ä¢ /ask &lt;–≤–æ–ø—Ä–æ—Å&gt; - –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤–∞—à–µ–π –±–∞–∑–µ (RAG)

<b>üîß 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:</b>
‚Ä¢ /mcp - –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è IDE
‚Ä¢ /check - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
‚Ä¢ /show - –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–∞–ø–∫–∏

üìä <b>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</b>
1. –í—ã —Å–∫–∏–¥—ã–≤–∞–µ—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç ‚Üí –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ <code>downloads/...</code>
2. –ë–æ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–∫–∞—á–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ø–∞–ø–∫–∏
4. –í—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ /transcribe –∏–ª–∏ /ai –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
5. –ò—â–µ—Ç–µ –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ /ask –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å —á–µ—Ä–µ–∑ MCP –ø—Ä—è–º–æ –∏–∑ IDE
"""
    await message.answer(help_text, parse_mode=ParseMode.HTML)
